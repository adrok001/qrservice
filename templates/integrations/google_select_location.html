{% extends 'dashboard/base.html' %}

{% block title %}Настройка Google Business{% endblock %}
{% block page_title %}Настройка Google Business{% endblock %}

{% block content %}
<div class="setup-container">
    <div class="setup-card">
        <div class="setup-header">
            <div class="integration-icon google">G</div>
            <div>
                <h2>Google Business подключён</h2>
                <p class="text-muted">Теперь укажите данные вашей локации</p>
            </div>
        </div>

        <div class="setup-notice">
            <h3>Как получить Account ID и Location ID:</h3>
            <ol>
                <li>Откройте <a href="https://business.google.com/" target="_blank">Google Business Profile</a></li>
                <li>Выберите вашу компанию</li>
                <li>В URL будет что-то вроде: <code>business.google.com/n/123456789/locations/987654321</code></li>
                <li><strong>Account ID:</strong> <code>accounts/123456789</code></li>
                <li><strong>Location ID:</strong> <code>locations/987654321</code></li>
            </ol>
        </div>

        <form method="post" class="setup-form">
            {% csrf_token %}

            <div class="form-group">
                <label for="account_id">Google Account ID</label>
                <input type="text"
                       id="account_id"
                       name="account_id"
                       class="input"
                       placeholder="accounts/123456789"
                       value="{{ connection.google_account_id }}"
                       required>
                <span class="help-text">Формат: accounts/ЧИСЛА</span>
            </div>

            <div class="form-group">
                <label for="location_id">Google Location ID</label>
                <input type="text"
                       id="location_id"
                       name="location_id"
                       class="input"
                       placeholder="locations/987654321"
                       value="{{ connection.google_location_id }}"
                       required>
                <span class="help-text">Формат: locations/ЧИСЛА</span>
            </div>

            <div class="form-group">
                <label for="external_url">Ссылка на профиль (опционально)</label>
                <input type="url"
                       id="external_url"
                       name="external_url"
                       class="input"
                       placeholder="https://g.page/your-business"
                       value="{{ connection.external_url }}">
                <span class="help-text">Ваша короткая ссылка в Google Maps</span>
            </div>

            <div class="form-actions">
                <a href="{% url 'integrations:settings' %}" class="btn">Отмена</a>
                <button type="submit" class="btn btn-primary">Сохранить и синхронизировать</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}
