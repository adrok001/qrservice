"""
Словари тональности для анализа отзывов HoReCa.

Содержит:
- NEGATIVE_LEMMAS: негативные леммы
- POSITIVE_LEMMAS: позитивные леммы
- NEGATIVE_PHRASES: негативные фразы
- POSITIVE_PHRASES: позитивные фразы
- NEGATABLE_WORDS: слова, негативные при отрицании
- NEGATIVE_WITHOUT_CONSTRUCTS: негатив с "без"
- WAIT_TIME_PATTERNS: паттерны времени ожидания
"""
from typing import Set

# Негативные леммы (только базовые формы)
NEGATIVE_LEMMAS: Set[str] = {
    # Общий негатив
    "ужасный", "ужас", "кошмар", "кошмарный",
    "ужастный", "ужастно",  # частая опечатка
    "отвратительный", "плохой", "худший",
    "вшивый", "паршивый", "дрянной", "гадкий",
    "унылый", "уныло",  # "унылые физиономии"

    # Еда
    "невкусный", "несъедобный", "холодный", "пересоленный",
    "недосоленный", "сырой", "недожаренный", "подгореть", "подгорелый",
    "горелый", "пригореть", "пригорелый", "уголь",
    "испортить", "испорченный", "несвежий", "тухлый", "протухнуть",
    "тухлятина", "тухнуть",
    "кислый", "пресный", "безвкусный",
    "черствый", "зачерстветь",  # чёрствый хлеб
    "отсыреть", "отсыревший",  # отсырело тесто
    "водянистый",  # водянистый суп
    "резиновый",  # резиновое мясо
    "переварить", "переваренный",  # переваренные макароны
    "разваренный",  # разваренная каша
    "обветренный",  # обветренные продукты на витрине
    "прогорклый",  # прогорклое масло
    "затхлый",  # затхлый запах
    "склизкий",  # склизкое мясо
    "непропечённый", "непропеченный",  # непропечённое тесто
    "размокнуть", "размокший",  # размокшая пицца
    "пересохнуть", "пересохший",  # пересохший рис
    "жирный",  # слишком жирная еда (в контексте HoReCa негатив)
    "уксус",  # "чистый уксус" = очень кислое

    # Сервис в целом
    "грубый", "грубость", "хам", "хамить", "хамство", "нахамить",
    "лгун", "обманщик", "обмануть", "обман",
    "невежливый", "игнорировать", "наглый", "наглость",
    "ленивый", "лень", "медлительный", "ленивец",
    "кленивец", "кленивцы",  # опечатка от "ленивец"
    "тюлень", "тюлени",
    "непрофессиональный", "непрофессионализм",
    "некомпетентный", "некомпетентность",
    "забывать", "забыть", "путать", "перепутать",
    "отказать", "отказаться", "отказывать",
    "равнодушный", "равнодушие",  # равнодушный персонал
    "безразличный", "безразличие",  # безразличное отношение
    "надменный", "надменность",  # надменный тон
    "высокомерный", "высокомерие",  # высокомерное отношение
    "пренебрежительный", "пренебрежение",  # пренебрежительное отношение
    "грымза",  # разговорное: грубая/недружелюбная
    "одолжение",  # "делают одолжение" — сарказм в HoReCa
    "неряшливый", "неопрятный",  # внешний вид персонала

    # Обсчёт/цена
    "обсчитать", "переплатить", "дорогой", "завышенный",
    "космический",  # космические цены
    "пробить",

    # Порции
    "крошечный", "маленький", "мизерный",

    # Частотность (редко = негатив в контексте сервиса)
    "редкий", "редко",  # "подходит редко", "редко убирают"

    # Завышенность (цены/порции)
    "высоковатый",  # "цены высоковаты"
    "завышать",  # "завышенные цены" (завышенный уже есть)

    # Ожидание
    "долгий", "медленный", "медленно", "долго",

    # Комфорт
    "грязный", "грязь", "вонь", "вонять", "вонючий",
    "шумный", "душный", "тесный",
    "накурить", "накуренный",  # накурено
    "пахнуть",  # неприятный запах
    "капать", "течь", "протекать",
    "волос",  # посторонний предмет в еде
    "насекомое", "таракан", "муха", "червь", "плесень",  # посторонние в еде
    "продавленный", "сломанный", "неудобный",  # мебель
    "плохо убранный", "неубранный",

    # Здоровье/безопасность
    "тошнить", "тошнота", "рвота", "отравить", "отравление",
    "диарея", "понос", "больница",

    # Сленг/разговорный негатив
    "отстой", "отстойный",  # отстойное место
    "фигня", "фигово", "фиговый",  # фигня а не ресторан
    "бардак",  # бардак в зале
    "халтура", "халтурный",  # халтурно приготовлено

    # Эмоции/общее
    "разочаровать", "разочарование", "расстроить",
    "неприятный", "неприятно", "испортить",
    "ненавидеть", "бесить", "раздражать",
    "виноват", "виноватый", "вина",
    "пожалеть",  # пожалели что пришли
    "развод",  # обман/мошенничество
    "зря",  # зря пришли

    # Процесс/бронирование
    "занятый", "занять",

    # Хамство/грубость (доп.)
    "грубить", "невоспитанный",

    # Температура еды
    "остыть",  # остывшая еда
}

# Негативные фразы
NEGATIVE_PHRASES: Set[str] = {
    # Отношение персонала
    "не рады", "не рад", "не рада", "нам не рады", "нас не рады",
    "не были рады", "не был рад", "не была рада",
    "не извинились", "не извинился", "не извинилась",
    "даже не извинились", "даже не извинился",
    # Рекомендации
    "не рекомендую", "не советую", "сильно не советую", "очень не советую",
    "категорически не советую", "вообще не советую", "не приду", "не вернусь",
    "ни ногой", "не ногой", "больше не приду",
    "больше не пойдём", "больше не пойдем", "больше не пойду",
    "никогда не пойду", "никогда не пойдём", "никогда не пойдем",
    "вряд ли вернусь", "вряд ли вернёмся", "вряд ли вернемся",
    "вряд-ли вернусь", "вряд-ли вернёмся", "вряд-ли вернемся",
    "советовать не буду", "не буду советовать",
    "праздник не удался", "не удался",
    "испортило впечатление", "испортил впечатление",
    "не предупредил", "не предупредили",

    # Оценка
    "так себе", "на троечку", "бывало лучше",
    "не очень", "не особо", "не слишком", "не так уж",
    "могло быть лучше",
    "не стоит", "не стоило",
    "зря пришли", "зря пошли", "зря приехали",
    "пожалели что пришли", "пожалели что пошли",
    "больше не придём", "больше не придем",

    # Время ожидания
    "час ждал", "час ждали", "час ожидания",
    "полчаса ждал", "полчаса ждали",
    "40 минут", "45 минут", "50 минут",
    "ждали очень долго", "очень долго ждали",
    "ждать целый час", "ждали целый час",
    "спустя час", "через час", "принесли спустя час", "принесли через час",
    "ждали час", "прождали час", "целый час ждали",

    # Бронирование/процесс
    "было занято", "оказалось занято", "оказался занят",
    "столик занят", "место занято",

    # Обсчёт
    "пробили больше", "посчитали больше",
    "в счёте больше", "в счете больше",
    "лишнее в счёте", "лишнее в счете",

    # Фразы с "нет" (отсутствие)
    "нет ответа", "нет реакции", "нет внимания",
    "мест нет", "нет мест", "нет свободных",
    "нет извинений", "без извинений",
    "не берут трубку", "трубку не берут", "не отвечают",
    # Комфорт/чистота
    "плохо убранный", "плохо убран", "плохо убрано",
    "грязный туалет", "грязная посуда",

    # Хамство/грубость
    "повышал тон", "повышала тон", "повышали тон",
    "хамское отношение", "грубое отношение",

    # Конфликт/решение проблем
    "отказались вернуть", "отказались менять", "отказались заменить",
    "не вернули деньги", "не вернули средства",
    "свалили на нас", "свалили вину", "обвинили нас",
    "не признали ошибку",

    # Температура еды
    "еле тёплый", "еле тёплая", "еле тёплое",
    "еле теплый", "еле теплая", "еле теплое",

    # Качество сервиса / отношение
    "оставляет желать лучшего", "оставляют желать лучшего",
    "желает лучшего",  # сокращённая форма
    "смотрит свысока", "смотрят свысока", "смотрел свысока", "смотрела свысока",
    "делает одолжение", "делают одолжение", "делал одолжение", "делала одолжение",
    "как одолжение",
    "через раз",  # "делают через раз" = нестабильно
    "кое-как",  # "кое-как приготовлено"
    "на отвали", "на отвяжись",  # "обслуживание на отвали"
    "с горем пополам",  # "с горем пополам дождались"
    "спустя рукава",  # "работают спустя рукава"
    "до лампочки",  # "до лампочки до гостей"
    "хоть бы хны",  # "хоть бы хны — никто не подошёл"

    # Цена / ценность
    "не стоит своих денег", "не стоит этих денег", "не стоит денег",
    "не стоит таких денег",
    "деньги на ветер",
    "деньги выброшены", "деньги выброшены на ветер",
    "за такие деньги",  # "за такие деньги можно лучше"

    # Ожидание (расширенное)
    "целую вечность", "ждали вечность", "ждали целую вечность",
    "как будто забыли", "про нас забыли", "о нас забыли",

    # Качество еды
    "есть невозможно", "это есть невозможно",
    "есть это невозможно",

    # Идиомы
    "не повёл глазом", "не повел глазом",  # = не отреагировал
    "не повела глазом",
    "и глазом не повёл", "и глазом не повел", "и глазом не повела",

    # Трёхсловные отрицания (не + глагол + существительное)
    "не обращает внимания", "не обращают внимания",
    "не обращает внимание", "не обращают внимание",
    "не уделяет внимания", "не уделяют внимания",
    "не проявляет интереса", "не проявляют интереса",
    "не проявляет внимания", "не проявляют внимания",
}

# Позитивные леммы
POSITIVE_LEMMAS: Set[str] = {
    # Сильный позитив
    "шикарный", "великолепный", "превосходный", "потрясающий",
    "восхитительный", "изумительный", "божественный", "идеальный",
    "прекрасный", "замечательный", "чудесный", "волшебный",

    # Обычный позитив
    "отличный", "хороший", "классный", "супер",
    "вкусный", "вкусно", "свежий", "качественный",
    "быстрый", "быстро", "оперативный", "оперативно",
    "вежливый", "приятный", "приятно", "внимательный", "добрый", "милый",
    "уютный", "комфортный", "чистый", "красивый", "стильный",
    "душевный", "тёплый", "симпатичный", "отменный",
    "неплохой", "неплохо",  # умеренный позитив
    "достойный", "достойно",
    "нормальный",  # нейтрально-позитивный
    "довольный",

    # Сленг/разговорное
    "кайф", "кайфовый", "огонь", "бомба", "топ", "топчик", "круто", "крутой",
    "офигенный", "клёвый", "клевый", "зачёт", "зачет",
    "чёткий", "четкий", "лайк", "красавчик",
    "суппер",  # опечатка супер

    # Благодарность/похвала
    "спасибо", "молодец", "прекрасно",

    # Глаголы
    "понравиться", "нравиться", "рекомендовать", "советовать",
    "порадовать", "восхитить", "удивить",

    # Существительные
    "восторг", "удовольствие", "наслаждение",
}

# Позитивные фразы
POSITIVE_PHRASES: Set[str] = {
    "выше всяких похвал", "вне конкуренции",
    "на высоте", "на высшем уровне", "в восторге",
    "пальчики оближешь", "5 из 5",
    "пять звёзд", "пять звезд",
    "просто кайф", "просто огонь", "просто бомба",
    # Цена
    "низкие цены", "низких цен", "самых низких",
    "дёшево и вкусно", "дешево и вкусно",
    # Чистота
    "ни одной грязной", "не было грязных",
    # Рекомендации
    "буду советовать", "всем советовать",
    "обязательно придём", "обязательно приду",
    # Возврат (позитив) - только с явным контекстом, иначе конфликт с "не вернусь"
    "придём ещё", "придем еще", "приду ещё", "приду еще",
    "обязательно вернёмся", "обязательно вернемся", "обязательно вернусь",
    "вернёмся ещё", "вернемся еще", "вернусь ещё", "вернусь еще",
    "вернёмся обязательно", "вернемся обязательно", "вернусь обязательно",
    # Удовлетворение
    "всё устроило", "все устроило",
    "в целом ок", "в целом окей", "в целом хорошо",
}

# Слова, негативные при отрицании ("не извинились" = негатив)
NEGATABLE_WORDS: Set[str] = {
    # Извинения/вежливость
    "извиниться", "извинение", "извинить",
    "представиться", "представляться",
    "поздороваться",  # "не поздоровался"

    # Помощь/внимание
    "помочь", "помощь", "внимание", "обратить",
    "встретить", "проводить", "обслужить", "обслуживать",
    "подсказать", "подсказывать",

    # Действия персонала
    "предложить", "принести", "дать", "давать",
    "убрать", "убраться", "почистить", "поменять", "заменить",
    "подойти", "подходить", "позвать", "откликнуться",
    "ответить", "отвечать", "реагировать",
    "забирать", "забрать",  # "не забирает тарелки"
    "уносить", "унести",  # "не уносят посуду"
    "спрашивать", "спросить",  # "не спрашивает"
    "улыбаться", "улыбнуться",  # "не улыбнулась"
    "слушать", "слышать",  # "не слушает"
    "стараться",  # "не старается"
    "торопиться",  # "не торопится"
    "следить",  # "не следит за залом"
    "попытаться", "пытаться",  # "не попытался извиниться"

    # Качество
    "понравиться", "нравиться", "устроить", "устраивать",
    "оправдать", "соответствовать",
    "привлекать", "привлечь",
    "стоить",  # "не стоит"

    # Компетенции
    "компетентный",

    # Время
    "успеть", "дождаться",

    # Возврат
    "вернуться", "возвращаться",
}

# Негативные конструкции с "без"
NEGATIVE_WITHOUT_CONSTRUCTS: Set[str] = {
    "внимание", "извинение", "ответ", "реакция",
    "помощь", "обслуживание", "сервис",
    "вкус", "соль", "специя",
}

# Regex паттерны для времени ожидания
WAIT_TIME_PATTERNS = [
    r'(\d+)\s*(час|часа|часов)',
    r'(3\d|4\d|5\d|\d{3,})\s*(минут|мин)',
    r'(полчаса|полтора\s*часа)',
]

# Паттерны для segment_analyzer
ASPECT_WAIT_TIME_PATTERNS = [
    (r'ждал[иа]?\s+час', 'долгое ожидание'),
    (r'час\s+ждал', 'долгое ожидание'),
    (r'\d+\s*час', 'долгое ожидание'),
    (r'ЧАС', 'эмоциональный акцент'),
    (r'не подтвердил', 'отказ'),
    # Минуты (30+)
    (r'(3[0-9]|4[0-9]|5[0-9])\s*минут', 'долгое ожидание'),
    (r'полчаса', 'долгое ожидание'),
    # "принесли через N"
    (r'принесли\s+через\s+\d+', 'долгое ожидание'),
    # "ждали заказ"
    (r'ждал[иа]?\s+заказ', 'долгое ожидание'),
]

# Паттерны "персонал + негативное действие"
PERSONNEL_NEGATIVE_PATTERNS = [
    # Забывают/игнорируют
    (r'официант\w*\s+забы[влт]', 'персонал забывает'),
    (r'персонал\s+забы[влт]', 'персонал забывает'),
    (r'официант\w*\s+игнорир', 'персонал игнорирует'),
    (r'нас\s+игнорир', 'игнорирование'),
    (r'официант\w*\s+не\s+(подошёл|подошел|подходил)', 'персонал не подошёл'),
    # Грубость/хамство
    (r'официант\w*\s+(нахамил|хамит|грубит)', 'хамство персонала'),
    (r'персонал\s+(нахамил|хамит|грубит)', 'хамство персонала'),
    # Ошибки
    (r'официант\w*\s+перепутал', 'ошибка персонала'),
    (r'принесли\s+не\s+то', 'ошибка в заказе'),
    # Сравнения с животными/медлительность (негативные)
    (r'официант\w*\s*(как|словно)\s*(тюлен|ленив|черепах|улитк)', 'медлительный персонал'),
    (r'(как|словно)\s*(тюлен|ленив|кленив|черепах|улитк)', 'медлительность'),
    # Отношение персонала
    (r'(нам|нас)\s+не\s+рад', 'недружелюбный персонал'),
    (r'не\s+(были\s+)?рад[ыа]?\s+(нам|нас|гост|клиент|посетител)', 'недружелюбный персонал'),
    # Тон/коммуникация
    (r'повыша[лет]\w*\s+тон', 'повышение тона'),
    (r'(орал[аи]?|кричал[аи]?)\s+на\s+(нас|меня|гост)', 'крик на клиента'),
    # Администратор
    (r'администратор\w*\s+(нахамил|хамит|грубит|отказал)', 'хамство администратора'),
    (r'администратор\w*\s+не\s+(подошёл|подошел|подошла|решил|помог)', 'бездействие администратора'),
    # Отказ решать проблему
    (r'отказал\w*\s+(менять|заменить|вернуть|исправить|решить|решать)', 'отказ решать проблему'),
    # Пренебрежение/безразличие
    (r'(официант|персонал|сотрудник)\w*\s+(равнодуш|безразлич|надмен|пренебрежит)', 'пренебрежительное отношение'),
    (r'(официант|персонал|сотрудник)\w*\s+смотр\w+\s+свысока', 'высокомерие персонала'),
    # Не убирают/не забирают
    (r'(тарелки?|посуд\w+|стакан\w*)\s+не\s+(убира|забира|уноси)', 'не убирают посуду'),
    (r'не\s+(убира|забира|уноси)\w+\s+(тарелки?|посуд\w+|стакан)', 'не убирают посуду'),
    # Редкое обслуживание
    (r'(подходит|подходят|появля\w+)\s+редко', 'редкое обслуживание'),
    (r'редко\s+(подходит|подходят|появля)', 'редкое обслуживание'),
]

# Маппинг наречий к прилагательным для RuSentiLex
ADVERB_TO_ADJ = {
    "неприятно": "неприятный", "хорошо": "хороший", "плохо": "плохой",
    "отлично": "отличный", "ужасно": "ужасный", "прекрасно": "прекрасный",
    "вкусно": "вкусный", "невкусно": "невкусный", "быстро": "быстрый",
    "медленно": "медленный", "грубо": "грубый", "долго": "долгий",
    "шикарно": "шикарный", "классно": "классный", "отвратительно": "отвратительный",
    # Комфорт
    "шумно": "шумный", "тесно": "тесный", "душно": "душный",
    # Оценка
    "достойно": "достойный", "неплохо": "неплохой", "нормально": "нормальный",
}

# Слова-исключения (не учитывать тональность из RuSentiLex)
# Эти слова часто дают ложные срабатывания в контексте HoReCa
EXCLUDED_FROM_SENTIMENT: Set[str] = {
    "сходить",  # "решили сходить" - нейтрально
    "сойти",    # аналогично
    "пойти",    # "решили пойти" - нейтрально
    "прийти",   # "пришли в ресторан" - нейтрально
    "зайти",    # "зашли перекусить" - нейтрально
    "место",    # "это место" - нейтрально
    "решить",   # "решили попробовать" - нейтрально
    "друг",     # "в другом ресторане" — не "друг" (friend), а "другой" (other)
    # Названия типов блюд/приёмов пищи (не оценка, а тип)
    "горячее", "закуска", "салат", "суп", "десерт",
    "напиток", "коктейль", "блюдо", "меню", "порция",
    "завтрак", "обед", "ужин", "ланч",
}

# Расширенные маркеры категорий для HoReCa
EXTENDED_CATEGORY_MARKERS = {
    "Сервис": {"админ", "обслужить", "обслуживать", "подходить", "подойти", "грымза", "одолжение"},
    "Комфорт": {
        "дым", "курить", "курящий", "кондиционер", "кондей",
        "кондицат", "конфиденцианер", "кондицонер", "капать",
    },
    "Продукт": {"вкусно"},
}

# Литоты: "не" + негативное слово = позитив (стилистическая фигура)
# "не плохо" → позитив (= неплохо), "не дурно" → позитив
LITOTES: Set[str] = {
    "плохой", "плохо",
    "дурной", "дурно",
}

# Маркеры сравнительного контекста (рядом с компаративом → пропуск слова)
COMPARATIVE_CONTEXT_MARKERS = (
    "другой", "другом", "другие", "другая", "другую", "других",
)
