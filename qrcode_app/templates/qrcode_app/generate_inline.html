{% extends 'qrcode_app/base.html' %}

{% block title %}Быстрая генерация QR{% endblock %}
{% block nav_quick %}active{% endblock %}

{% block content %}
<div class="page-title">
    <h1>Быстрая генерация</h1>
</div>
<p class="page-subtitle">Мгновенное создание QR-кода (не сохраняется в базу данных)</p>

<div class="card">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label class="form-label" for="data">Данные / URL</label>
            <textarea class="form-textarea" name="data" id="data" placeholder="Введите текст, URL или любые данные..." required>{{ data }}</textarea>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label class="form-label" for="fill_color">Цвет QR-кода</label>
                <input type="color" class="form-color" name="fill_color" id="fill_color" value="{{ fill_color|default:'#000000' }}">
            </div>
            <div class="form-group">
                <label class="form-label" for="back_color">Цвет фона</label>
                <input type="color" class="form-color" name="back_color" id="back_color" value="{{ back_color|default:'#ffffff' }}">
            </div>
        </div>
        <div class="form-group">
            <label class="form-label" for="logo">Логотип (необязательно)</label>
            <input type="file" class="form-input" name="logo" id="logo" accept="image/*">
            <p class="form-hint">Логотип будет размещён в центре QR-кода</p>
        </div>
        <div class="btn-group">
            <button type="submit" class="btn btn-primary">Создать</button>
            {% if qr_image %}
            <a href="{% url 'download_qr' %}?data={{ data|urlencode }}&fill_color={{ fill_color|urlencode }}&back_color={{ back_color|urlencode }}" class="btn btn-success">Скачать PNG</a>
            {% endif %}
        </div>
    </form>
</div>

{% if qr_image %}
<div class="qr-display mt-3">
    <img src="data:image/png;base64,{{ qr_image }}" alt="QR-код" class="qr-image">
    <p class="qr-caption">Отсканируйте QR-код камерой телефона</p>
</div>
{% endif %}
{% endblock %}
